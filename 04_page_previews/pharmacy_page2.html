<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacy Analytics - Markets & Margins</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #374151;
            padding: 20px;
            min-height: 100vh;
        }

        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            padding: 30px 40px;
            border-bottom: 3px solid #0F766E;
            position: relative;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title-section h1 {
            color: #0F766E;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .title-section p {
            color: #6B7280;
            font-size: 16px;
        }

        .breadcrumb {
            font-size: 13px;
            color: #9CA3AF;
            margin-bottom: 8px;
        }

        .breadcrumb span {
            color: #0F766E;
            font-weight: 600;
        }

        .navigation {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .nav-btn {
            padding: 10px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #0F766E;
        }

        .nav-btn.active {
            background: #0F766E;
            color: white;
        }

        .nav-btn:not(.active) {
            background: white;
            color: #0F766E;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(15, 118, 110, 0.3);
        }

        .nav-arrow {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #F3F4F6;
            color: #6B7280;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .nav-arrow:hover {
            background: #0F766E;
            color: white;
        }

        .content {
            padding: 40px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: #374151;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #E5E7EB;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-icon {
            width: 18px;
            height: 18px;
            background: #0F766E;
            color: white;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: help;
            font-weight: 700;
        }

        /* Country Matrix Table */
        .country-table {
            width: 100%;
            border-collapse: collapse;
        }

        .country-table thead {
            background: #0F766E;
            color: white;
        }

        .country-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
        }

        .country-table td {
            padding: 12px;
            border-bottom: 1px solid #E5E7EB;
            font-size: 13px;
        }

        .country-table tbody tr:nth-child(even) {
            background: #F9FAFB;
        }

        .country-table tbody tr:hover {
            background: #F0FDFA;
        }

        .country-flag {
            font-size: 20px;
            margin-right: 8px;
        }

        .country-name {
            font-weight: 600;
            color: #374151;
        }

        .status-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .status-dot.green {
            background: #10B981;
        }

        .status-dot.amber {
            background: #F59E0B;
        }

        .status-dot.red {
            background: #DC2626;
        }

        .growth-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-weight: 600;
        }

        .growth-indicator.positive {
            color: #10B981;
        }

        .growth-indicator.negative {
            color: #DC2626;
        }

        /* Pharmacy Type Cards */
        .type-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .type-card {
            background: linear-gradient(135deg, #ffffff 0%, #F0FDFA 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #0F766E;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: transform 0.3s ease;
        }

        .type-card:hover {
            transform: translateX(4px);
        }

        .type-icon {
            width: 56px;
            height: 56px;
            background: #0F766E;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }

        .type-details {
            flex: 1;
        }

        .type-name {
            font-size: 16px;
            font-weight: 700;
            color: #0F766E;
            margin-bottom: 8px;
        }

        .type-stats {
            display: flex;
            gap: 24px;
            font-size: 12px;
            color: #6B7280;
        }

        .type-stat {
            display: flex;
            flex-direction: column;
        }

        .type-stat-label {
            font-size: 11px;
            margin-bottom: 4px;
        }

        .type-stat-value {
            font-size: 16px;
            font-weight: 700;
            color: #374151;
        }

        /* Alert Section */
        .alert-section {
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
            border-left: 4px solid #F59E0B;
            border-radius: 12px;
            padding: 24px;
        }

        .alert-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .alert-icon {
            width: 32px;
            height: 32px;
            background: #F59E0B;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 700;
        }

        .alert-title {
            font-size: 18px;
            font-weight: 700;
            color: #92400E;
        }

        .alert-table {
            width: 100%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .alert-table th {
            background: #F59E0B;
            color: white;
            padding: 10px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
        }

        .alert-table td {
            padding: 10px;
            font-size: 12px;
            border-bottom: 1px solid #E5E7EB;
        }

        .alert-table tr:last-child td {
            border-bottom: none;
        }

        .issue-badge {
            background: #DC2626;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 320px;
        }

        .chart-container canvas {
            max-height: 320px;
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="title-section">
                    <div class="breadcrumb">Overview > <span>Markets</span></div>
                    <h1>Markets & Margins</h1>
                    <p>Geographic Performance Deep-Dive</p>
                </div>
                <div class="navigation">
                    <button class="nav-arrow">‚Üê</button>
                    <button class="nav-btn">Page 1</button>
                    <button class="nav-btn active">Page 2</button>
                    <button class="nav-btn">Page 3</button>
                    <button class="nav-arrow">‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Top Grid -->
            <div class="dashboard-grid">
                <!-- Country Performance Matrix -->
                <div class="card">
                    <div class="card-title">
                        Country Performance
                        <span class="info-icon" title="Sorted by total revenue">i</span>
                    </div>
                    <table class="country-table">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>Pharmacies</th>
                                <th>Revenue</th>
                                <th>Margin %</th>
                                <th>YoY Growth</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="country-flag">üá©üá™</span><span class="country-name">Germany</span></td>
                                <td><strong>22</strong></td>
                                <td>‚Ç¨1.9M</td>
                                <td><span class="status-dot green"></span>31.2%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +6.8%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üá´üá∑</span><span class="country-name">France</span></td>
                                <td><strong>20</strong></td>
                                <td>‚Ç¨1.7M</td>
                                <td><span class="status-dot amber"></span>27.5%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +4.2%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üáÆüáπ</span><span class="country-name">Italy</span></td>
                                <td><strong>18</strong></td>
                                <td>‚Ç¨1.5M</td>
                                <td><span class="status-dot amber"></span>26.8%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +5.1%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üáßüá™</span><span class="country-name">Belgium</span></td>
                                <td><strong>14</strong></td>
                                <td>‚Ç¨1.2M</td>
                                <td><span class="status-dot green"></span>29.3%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +3.9%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üáµüá±</span><span class="country-name">Poland</span></td>
                                <td><strong>13</strong></td>
                                <td>‚Ç¨1.1M</td>
                                <td><span class="status-dot red"></span>24.1%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +7.5%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üá™üá∏</span><span class="country-name">Spain</span></td>
                                <td><strong>12</strong></td>
                                <td>‚Ç¨1.0M</td>
                                <td><span class="status-dot amber"></span>27.9%</td>
                                <td><span class="growth-indicator negative">‚ñº -1.2%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üá≥üá±</span><span class="country-name">Netherlands</span></td>
                                <td><strong>11</strong></td>
                                <td>‚Ç¨950K</td>
                                <td><span class="status-dot green"></span>30.5%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +8.3%</span></td>
                            </tr>
                            <tr>
                                <td><span class="country-flag">üá¶üáπ</span><span class="country-name">Austria</span></td>
                                <td><strong>10</strong></td>
                                <td>‚Ç¨850K</td>
                                <td><span class="status-dot amber"></span>26.2%</td>
                                <td><span class="growth-indicator positive">‚ñ≤ +2.8%</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Margin Distribution Scatter -->
                <div class="card">
                    <div class="card-title">Profitability Patterns</div>
                    <div class="chart-container">
                        <canvas id="scatterChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Middle Grid -->
            <div class="dashboard-grid">
                <!-- Regional Breakdown -->
                <div class="card">
                    <div class="card-title">Top 10 Regions by Revenue</div>
                    <div class="chart-container">
                        <canvas id="regionalChart"></canvas>
                    </div>
                </div>

                <!-- Pharmacy Type Comparison -->
                <div class="card">
                    <div class="card-title">Performance by Location Type</div>
                    <div class="type-cards">
                        <div class="type-card">
                            <div class="type-icon">üè¢</div>
                            <div class="type-details">
                                <div class="type-name">Urban Pharmacies</div>
                                <div class="type-stats">
                                    <div class="type-stat">
                                        <div class="type-stat-label">Count</div>
                                        <div class="type-stat-value">50</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Revenue</div>
                                        <div class="type-stat-value">‚Ç¨75K</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Margin</div>
                                        <div class="type-stat-value">27.8%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="type-card">
                            <div class="type-icon">üèòÔ∏è</div>
                            <div class="type-details">
                                <div class="type-name">Suburban Pharmacies</div>
                                <div class="type-stats">
                                    <div class="type-stat">
                                        <div class="type-stat-label">Count</div>
                                        <div class="type-stat-value">47</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Revenue</div>
                                        <div class="type-stat-value">‚Ç¨72K</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Margin</div>
                                        <div class="type-stat-value">28.5%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="type-card">
                            <div class="type-icon">üå≥</div>
                            <div class="type-details">
                                <div class="type-name">Rural Pharmacies</div>
                                <div class="type-stats">
                                    <div class="type-stat">
                                        <div class="type-stat-label">Count</div>
                                        <div class="type-stat-value">23</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Revenue</div>
                                        <div class="type-stat-value">‚Ç¨68K</div>
                                    </div>
                                    <div class="type-stat">
                                        <div class="type-stat-label">Avg Margin</div>
                                        <div class="type-stat-value">27.2%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alert Section -->
            <div class="alert-section">
                <div class="alert-header">
                    <div class="alert-icon">‚ö†</div>
                    <div class="alert-title">Attention Required</div>
                </div>
                <table class="alert-table">
                    <thead>
                        <tr>
                            <th>Pharmacy Name</th>
                            <th>Country</th>
                            <th>Region</th>
                            <th>Revenue</th>
                            <th>Margin %</th>
                            <th>YoY Change</th>
                            <th>Primary Issue</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Barcelona HealthPoint #003</td>
                            <td>üá™üá∏ Spain</td>
                            <td>Catalonia</td>
                            <td>‚Ç¨62K</td>
                            <td>18.5%</td>
                            <td style="color: #DC2626;">-3.2%</td>
                            <td><span class="issue-badge">Low Margin</span></td>
                        </tr>
                        <tr>
                            <td>Warsaw HealthPoint #045</td>
                            <td>üáµüá± Poland</td>
                            <td>Masovia</td>
                            <td>‚Ç¨58K</td>
                            <td>19.2%</td>
                            <td style="color: #DC2626;">-2.8%</td>
                            <td><span class="issue-badge">Low Margin</span></td>
                        </tr>
                        <tr>
                            <td>Milan HealthPoint #078</td>
                            <td>üáÆüáπ Italy</td>
                            <td>Lombardy</td>
                            <td>‚Ç¨71K</td>
                            <td>22.1%</td>
                            <td style="color: #DC2626;">-4.5%</td>
                            <td><span class="issue-badge">Declining Revenue</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Scatter Chart - Revenue vs Margin %
        const scatterCtx = document.getElementById('scatterChart').getContext('2d');
        
        const scatterData = {
            datasets: [{
                label: 'Urban',
                data: [
                    {x: 85, y: 29.5, r: 8},
                    {x: 78, y: 27.2, r: 7},
                    {x: 92, y: 31.8, r: 9},
                    {x: 68, y: 25.5, r: 6},
                    {x: 81, y: 28.9, r: 7}
                ],
                backgroundColor: 'rgba(15, 118, 110, 0.6)',
                borderColor: '#0F766E',
                borderWidth: 2
            }, {
                label: 'Suburban',
                data: [
                    {x: 75, y: 30.2, r: 7},
                    {x: 70, y: 26.8, r: 6},
                    {x: 82, y: 29.1, r: 8},
                    {x: 64, y: 27.5, r: 6}
                ],
                backgroundColor: 'rgba(20, 184, 166, 0.6)',
                borderColor: '#14B8A6',
                borderWidth: 2
            }, {
                label: 'Rural',
                data: [
                    {x: 62, y: 28.5, r: 5},
                    {x: 58, y: 25.2, r: 5},
                    {x: 71, y: 27.8, r: 6},
                    {x: 55, y: 26.1, r: 5}
                ],
                backgroundColor: 'rgba(94, 234, 212, 0.6)',
                borderColor: '#5EEAD4',
                borderWidth: 2
            }]
        };

        new Chart(scatterCtx, {
            type: 'bubble',
            data: scatterData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            font: { size: 12 },
                            color: '#6B7280'
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 118, 110, 0.95)',
                        callbacks: {
                            label: function(context) {
                                return [
                                    context.dataset.label,
                                    'Revenue: ‚Ç¨' + context.parsed.x + 'K',
                                    'Margin: ' + context.parsed.y + '%'
                                ];
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Revenue (‚Ç¨K)',
                            color: '#6B7280',
                            font: { size: 12, weight: 'bold' }
                        },
                        grid: { color: '#F3F4F6' },
                        ticks: { color: '#9CA3AF' }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Margin %',
                            color: '#6B7280',
                            font: { size: 12, weight: 'bold' }
                        },
                        grid: { color: '#F3F4F6' },
                        ticks: { 
                            color: '#9CA3AF',
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });

        // Regional Bar Chart
        const regionalCtx = document.getElementById('regionalChart').getContext('2d');
        new Chart(regionalCtx, {
            type: 'bar',
            data: {
                labels: ['DE - Bavaria', 'FR - √éle-de-France', 'IT - Lombardy', 'BE - Flanders', 
                         'PL - Masovia', 'ES - Catalonia', 'NL - North Holland', 'AT - Vienna',
                         'DE - North Rhine', 'FR - Provence'],
                datasets: [{
                    label: 'Revenue',
                    data: [285, 268, 245, 198, 185, 172, 165, 158, 145, 138],
                    backgroundColor: '#0F766E',
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(15, 118, 110, 0.95)',
                        callbacks: {
                            label: function(context) {
                                return 'Revenue: ‚Ç¨' + context.parsed.x + 'K';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { color: '#F3F4F6' },
                        ticks: { 
                            color: '#9CA3AF',
                            callback: function(value) {
                                return '‚Ç¨' + value + 'K';
                            }
                        }
                    },
                    y: {
                        grid: { display: false },
                        ticks: { 
                            color: '#6B7280',
                            font: { size: 11 }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
